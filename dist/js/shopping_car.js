"use strict";require(["./requirejs.config"],function(){require(["jquery","url","template","cookie","header","footer"],function(h,t,r){h(function(){new Promise(function(n,e){h.ajax({url:t.baseurlCar,type:"GET",dataType:"json",success:function(e){if(1===e.res_code){var t=e.res_body,a=r("shopping_your_love",{car:t});h("#shopping_your").html(a),n()}}})}).then(function(){require(["addBtn"],function(){if(h.cookie("shopping")){var o,s=JSON.parse(h.cookie("shopping")),e='<tr><td><input type="checkbox" class="allCheck"/>全选</td><td>序号</td><td><span>配置</span></td><td><span>尺寸</span></td><td>数量</td><td><span>单价</span></td><td><span>总价</span></td><td><a href="javascript:;" class="allDelBtn">全部删除</a></td></tr>',t=1,i=0,a=0,n=!0,r=!1,c=void 0;try{for(var p,l=s[Symbol.iterator]();!(n=(p=l.next()).done);n=!0){var d=p.value;e+='<tr><td><input type="checkbox" class="check"/></td><td>'+t+++"</td><td><span>"+d.deploy+"</span></td><td><span>"+d.size+'</span></td><td><span class="num">'+d.num+'</span></td><td><span class="price">'+d.price+'元</span></td><td><span class="allprice">'+d.num*d.price+'元</span></td><td><a href="javascript:;" class="delBtn">删除</a></td></tr>',a+=d.num}}catch(e){r=!0,c=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}h("#allNum").text(a),h(".shopping_main_wrap").html(e).on("click",function(e){var t=h(".shopping_main_wrap .allCheck"),a=h(".shopping_main_wrap .check");if(e=e||event,o=e.target.parentNode.parentNode,"allCheck"===e.target.className){for(var n=0;n<a.length;n++)a[n].checked=e.target.checked;i=t.prop("checked")?a.length:0,console.log(h("check:checked"))}else if("check"===e.target.className)e.target.checked?i++:i--,i===a.length?t.prop("checked",!0):t.prop("checked",!1);else if("delBtn"===e.target.className){if(confirm("确定删除该条商品？")){var r=h(o.children[1]).text()-1;s.splice(r);var c=JSON.stringify(s);h.cookie("shopping",c,{expires:7,path:"/"}),o.parentNode.removeChild(o),location.reload()}}else"allDelBtn"===e.target.className?(console.log(1),confirm("确定清空购车车？")&&(console.log(this),this.remove(this),h.cookie("shopping","",{expires:-1,path:"/"}),location.reload())):e.target.id;!function(){for(var e=0,t=0;t<a.length;t++)a[t].checked&&(e+=s[t].price*s[t].num);h("#allPrice").text("￥"+e)}()}),h("#settle").on("click",function(){if(0<i){var e=h(".shopping_main_wrap .check"),t=[];if(h.cookie("Microsoft"))for(var a=0;a<e.length;a++){if(e[a].checked){var n=h(e[a]).parent().parent().children()[1].innerHTML-1;t.push(s[n]);var r=JSON.stringify(t);h.cookie("settle",r,{expires:1,path:"/"})}h(".shopping_wrapper2").addClass("settle")}else alert("请登录"),location.href="/html/component/register.html"}})}})})})})});